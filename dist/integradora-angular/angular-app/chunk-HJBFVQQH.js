import{a as N}from"./chunk-4LWGM43U.js";import"./chunk-RHMV3US2.js";import{a as D,b as u,c as V,d as L,e as M,f as R,g as O,h as j,i as z,j as B,k as Z,l as G,m as H}from"./chunk-IPELWIB7.js";import{i as q,j as $,k as A,o as S,r as b}from"./chunk-LYJN6XNL.js";import{Ga as c,Ia as l,Ka as T,La as r,Ma as t,Na as _,Oa as y,P as U,Pa as w,Qa as F,Ra as f,Sa as p,U as x,Xa as n,Y as P,Ya as v,Za as I,ab as k,ea as h,fa as E,ua as a,va as C}from"./chunk-SYTZFNVP.js";var K=(()=>{let o=class o{constructor(s){this.http=s}getUsers(){return this.http.get(`${b.UrlUsers}/index`)}delete(s){return this.http.delete(`${b.UrlUsers}/destroy/${s}`)}postUser(s){return this.http.post(`${b.UrlUsers}/store`,s)}updateUser(s,d){return this.http.put(`${b.UrlUsers}/update/${s}`,d)}getUser(s){return this.http.get(`${b.UrlUsers}/show/${s}`)}};o.\u0275fac=function(d){return new(d||o)(x(S))},o.\u0275prov=U({token:o,factory:o.\u0275fac,providedIn:"root"});let e=o;return e})();var Q=(()=>{let o=class o{constructor(s){this.http=s}getRoles(){return this.http.get(`${b.UrlRoles}/index2`)}};o.\u0275fac=function(d){return new(d||o)(x(S))},o.\u0275prov=U({token:o,factory:o.\u0275fac,providedIn:"root"});let e=o;return e})();function ee(e,o){if(e&1&&(r(0,"li"),n(1),t()),e&2){let i=p(2);a(),I("<",i.errors.name,"")}}function te(e,o){if(e&1&&(r(0,"li"),n(1),t()),e&2){let i=p(2);a(),v(i.errors.email)}}function re(e,o){if(e&1&&(r(0,"li"),n(1),t()),e&2){let i=p(2);a(),v(i.errors.password)}}function ie(e,o){if(e&1&&(r(0,"div",46),c(1,ee,2,1,"li",18)(2,te,2,1,"li",18)(3,re,2,1,"li",18),t()),e&2){let i=p();a(),l("ngIf",i.errors.name),a(),l("ngIf",i.errors.email),a(),l("ngIf",i.errors.password)}}function ne(e,o){if(e&1&&(r(0,"div",47),n(1),t()),e&2){let i=p();a(),I(" ",i.msg,`
`)}}function oe(e,o){e&1&&(y(0),r(1,"tr")(2,"td",48),n(3,"No hay usuarios"),t()(),w())}function se(e,o){if(e&1){let i=F();r(0,"button",52),f("click",function(){h(i);let d=p(2).$implicit,m=p();return E(m.deleteModal(d.id))}),_(1,"i",53),t()}}function ae(e,o){if(e&1){let i=F();r(0,"button",54),f("click",function(){h(i);let d=p(2).$implicit,m=p();return E(m.deleteModal(d.id))}),_(1,"i",55),t()}}function le(e,o){if(e&1){let i=F();y(0),r(1,"td"),n(2),t(),r(3,"td"),n(4),t(),r(5,"td"),n(6),t(),r(7,"td")(8,"button",49),f("click",function(){h(i);let d=p().$implicit,m=p();return E(m.editModal(d.id))}),_(9,"i",50),t(),c(10,se,2,0,"button",51)(11,ae,2,0),t(),w()}if(e&2){let i=p().$implicit;a(2),v(i.name),a(2),v(i.email),a(2),v(i.status==1?"Activo":"Inactivo"),a(4),T(10,i.status==1?10:11)}}function me(e,o){if(e&1&&(r(0,"tr"),c(1,le,12,4,"ng-container",18),t()),e&2){let i=o.$implicit,s=p();a(),l("ngIf",s.userfilter=="all"||s.userfilter=="active"&&i.status==1||s.userfilter=="inactive"&&i.status!=1)}}function de(e,o){e&1&&(r(0,"div"),n(1,"El nombre es requerido"),t())}function ce(e,o){e&1&&(r(0,"div"),n(1,"El nombre debe tener al menos 3 caracteres"),t())}function pe(e,o){e&1&&(r(0,"div"),n(1,"El nombre no puede tener m\xE1s de 30 caracteres"),t())}function ue(e,o){if(e&1&&(r(0,"div",56),c(1,de,2,0,"div",18)(2,ce,2,0,"div",18)(3,pe,2,0,"div",18),t()),e&2){let i=p();a(),l("ngIf",i.PostUserForm.controls.name.errors==null?null:i.PostUserForm.controls.name.errors.required),a(),l("ngIf",i.PostUserForm.controls.name.errors==null?null:i.PostUserForm.controls.name.errors.minlength),a(),l("ngIf",i.PostUserForm.controls.name.errors==null?null:i.PostUserForm.controls.name.errors.maxlength)}}function _e(e,o){e&1&&(r(0,"div"),n(1,"El correo electr\xF3nico es requerido"),t())}function fe(e,o){e&1&&(r(0,"div"),n(1,"El correo electr\xF3nico debe ser v\xE1lido"),t())}function ve(e,o){e&1&&(r(0,"div"),n(1,"El correo electr\xF3nico debe seguir el patr\xF3n especificado"),t())}function be(e,o){if(e&1&&(r(0,"div",56),c(1,_e,2,0,"div",18)(2,fe,2,0,"div",18)(3,ve,2,0,"div",18),t()),e&2){let i=p();a(),l("ngIf",i.PostUserForm.controls.email.errors==null?null:i.PostUserForm.controls.email.errors.required),a(),l("ngIf",i.PostUserForm.controls.email.errors==null?null:i.PostUserForm.controls.email.errors.email),a(),l("ngIf",i.PostUserForm.controls.email.errors==null?null:i.PostUserForm.controls.email.errors.pattern)}}function ge(e,o){e&1&&(r(0,"div"),n(1,"La contrase\xF1a es requerida"),t())}function Ue(e,o){e&1&&(r(0,"div"),n(1,"La contrase\xF1a debe tener al menos 8 caracteres"),t())}function xe(e,o){e&1&&(r(0,"div"),n(1,"La contrase\xF1a no puede tener m\xE1s de 230 caracteres"),t())}function he(e,o){e&1&&(r(0,"div"),n(1,"La contrase\xF1a debe seguir el patr\xF3n especificado"),t())}function Ee(e,o){if(e&1&&(r(0,"div",56),c(1,ge,2,0,"div",18)(2,Ue,2,0,"div",18)(3,xe,2,0,"div",18)(4,he,2,0,"div",18),t()),e&2){let i=p();a(),l("ngIf",i.PostUserForm.controls.password.errors==null?null:i.PostUserForm.controls.password.errors.required),a(),l("ngIf",i.PostUserForm.controls.password.errors==null?null:i.PostUserForm.controls.password.errors.minlength),a(),l("ngIf",i.PostUserForm.controls.password.errors==null?null:i.PostUserForm.controls.password.errors.maxlength),a(),l("ngIf",i.PostUserForm.controls.password.errors==null?null:i.PostUserForm.controls.password.errors.pattern)}}function Ce(e,o){e&1&&(r(0,"div"),n(1,"La confirmaci\xF3n de la contrase\xF1a es requerida"),t())}function Fe(e,o){e&1&&(r(0,"div"),n(1,"La confirmaci\xF3n de la contrase\xF1a debe tener al menos 8 caracteres"),t())}function Se(e,o){e&1&&(r(0,"div"),n(1,"La confirmaci\xF3n de la contrase\xF1a no puede tener m\xE1s de 230 caracteres"),t())}function ye(e,o){e&1&&(r(0,"div"),n(1,"La confirmaci\xF3n de la contrase\xF1a debe seguir el patr\xF3n especificado"),t())}function we(e,o){if(e&1&&(r(0,"div",56),c(1,Ce,2,0,"div",18)(2,Fe,2,0,"div",18)(3,Se,2,0,"div",18)(4,ye,2,0,"div",18),t()),e&2){let i=p();a(),l("ngIf",i.PostUserForm.controls.password_confirmation.errors==null?null:i.PostUserForm.controls.password_confirmation.errors.required),a(),l("ngIf",i.PostUserForm.controls.password_confirmation.errors==null?null:i.PostUserForm.controls.password_confirmation.errors.minlength),a(),l("ngIf",i.PostUserForm.controls.password_confirmation.errors==null?null:i.PostUserForm.controls.password_confirmation.errors.maxlength),a(),l("ngIf",i.PostUserForm.controls.password_confirmation.errors==null?null:i.PostUserForm.controls.password_confirmation.errors.pattern)}}function Ie(e,o){e&1&&(r(0,"div"),n(1,"El status es requerido"),t())}function Pe(e,o){e&1&&(r(0,"div"),n(1,"El status debe ser 0 o 1"),t())}function Te(e,o){if(e&1&&(r(0,"div",56),c(1,Ie,2,0,"div",18)(2,Pe,2,0,"div",18),t()),e&2){let i=p();a(),l("ngIf",i.PostUserForm.controls.status.errors==null?null:i.PostUserForm.controls.status.errors.required),a(),l("ngIf",i.PostUserForm.controls.status.errors==null?null:i.PostUserForm.controls.status.errors.pattern)}}function ke(e,o){if(e&1&&(r(0,"option",57),n(1),t()),e&2){let i=o.$implicit;l("value",i.id),a(),v(i.rol)}}function qe(e,o){e&1&&(r(0,"div"),n(1,"El Rol ID es requerido"),t())}function $e(e,o){e&1&&(r(0,"div"),n(1,"El Rol ID debe ser un n\xFAmero"),t())}function Ae(e,o){if(e&1&&(r(0,"div",56),c(1,qe,2,0,"div",18)(2,$e,2,0,"div",18),t()),e&2){let i=p();a(),l("ngIf",i.PostUserForm.controls.rol_id.errors==null?null:i.PostUserForm.controls.rol_id.errors.required),a(),l("ngIf",i.PostUserForm.controls.rol_id.errors==null?null:i.PostUserForm.controls.rol_id.errors.pattern)}}function Ne(e,o){if(e&1&&(r(0,"option",57),n(1),t()),e&2){let i=o.$implicit;l("value",i.id),a(),v(i.rol)}}var ze=(()=>{let o=class o{constructor(s,d,m){this.userService=s,this.formBuilde=d,this.rolesSerivce=m,this.users={data:[]},this.userfilter="all",this.userData={name:"",email:"",password:"",password_confirmation:"",status:0,rol_id:0},this.usershow={id:0,name:"",email:"",rol_id:0,status:0},this.userUpdate={name:"",email:"",password:"",status:0,rol_id:0},this.roles={data:[]},this.msg="",this.id=0,this.errrorV=!1,this.errors={name:"",email:"",password:"",status:"",rol_id:""},this.PostUserForm=this.formBuilde.group({name:[this.userData.name,[u.required,u.minLength(3),u.maxLength(30)]],email:[this.userData.email,[u.required,u.email,u.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]],password:[this.userData.password,[u.required,u.minLength(8),u.pattern(/^[a-zA-Z0-9 ]*$/),u.maxLength(230)]],password_confirmation:[this.userData.password_confirmation,[u.required,u.minLength(8),u.pattern(/^[a-zA-Z0-9 ]*$/),u.maxLength(230)]],status:[this.userData.status,[u.required,u.pattern(/^[0-1]{1}$/)]],rol_id:[1,[u.required,u.pattern(/^[0-9]{1}$/)]]})}ngOnInit(){this.getUsers(),this.getRoles()}filterUsers(s){this.userfilter=s}deleteModal(s){this.id=s,console.log(this.id)}postUser(){this.PostUserForm.valid&&(this.userData=this.PostUserForm.value,this.userService.postUser(this.userData).subscribe(s=>{this.getUsers(),this.msg=s.msg,setTimeout(()=>{this.msg=""},3e3),this.PostUserForm.reset()},s=>{console.log(s),this.errrorV=!0,this.errors.password=s.error.errors.password,this.errors.email=s.error.errors.email,this.errors.name=s.error.errors.name,this.errors.status=s.error.errors.status,this.errors.rol_id=s.error.errors.rol_id,setTimeout(()=>{this.errrorV=!1,this.errors={name:"",email:"",password:"",status:"",rol_id:""}},3e3)}))}getUsers(){this.userService.getUsers().subscribe(s=>{this.users=s},s=>{console.log(s)})}getRoles(){this.rolesSerivce.getRoles().subscribe(s=>{console.log(s),this.roles=s},s=>{console.log(s)})}deleteUser(){this.userService.delete(this.id).subscribe(s=>{this.getUsers()},s=>{console.log(s)})}editModal(s){this.id=s,this.userService.getUser(this.id).subscribe(d=>{this.usershow=d,this.userUpdate.name=this.usershow.name,this.userUpdate.email=this.usershow.email,this.userUpdate.status=this.usershow.status,this.userUpdate.rol_id=this.usershow.rol_id,console.log(this.userUpdate)},d=>{console.log(d)})}closemodal(){this.id=0}};o.\u0275fac=function(d){return new(d||o)(C(K),C(G),C(Q))},o.\u0275cmp=P({type:o,selectors:[["app-users"]],standalone:!0,features:[k],decls:128,vars:22,consts:[["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6","text-center"],[1,"card","border-primary","shadow"],[1,"card-body"],[1,"card-title","text-primary"],[1,"row"],[1,"col-md-12"],[1,"card","border","shadow"],["type","button","data-bs-toggle","modal","data-bs-target","#postUser",1,"btn","add"],[1,"bi","bi-person"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"table","table-striped"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"modalId","modalTitle"],["type","button","data-bs-dismiss","modal",1,"btn","btn-success",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","formControlName","name","placeholder","Nombre","required","",1,"form-control"],["class","text-danger",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","name","email","formControlName","email","placeholder","Email","required","",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","name","password","formControlName","password","placeholder","Contrase\xF1a","required","",1,"form-control"],[1,"mb3"],["for","password_confirmation",1,"form-label"],["type","password","id","password_confirmation","name","password_confirmation","formControlName","password_confirmation","placeholder","Confirmar contrase\xF1a","required","",1,"form-control"],["for","status",1,"form-label"],["id","status","name","status","formControlName","status","required","",1,"form-select"],["value","1"],["value","0"],["for","rol_id",1,"form-label"],["id","rol_id","name","rol_id","formControlName","rol_id","required","",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-success"],["colspan","4",1,"text-center"],["type","button","data-bs-toggle","modal","data-bs-target","#putUser",1,"btn","btn-warning",3,"click"],[1,"bi","bi-pencil-fill"],["type","button","data-bs-toggle","modal","data-bs-target","#deleteUser",1,"btn","btn-danger"],["type","button","data-bs-toggle","modal","data-bs-target","#deleteUser",1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash-fill"],["type","button","data-bs-toggle","modal","data-bs-target","#Activarusuario",1,"btn","btn-success",3,"click"],[1,"bi","bi-check"],[1,"text-danger"],[3,"value"]],template:function(d,m){d&1&&(c(0,ie,4,3,"div",0)(1,ne,2,1,"div",1),r(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1",7),n(8,"Usuarios"),t()()()()(),r(9,"div",2)(10,"div",8)(11,"div",9)(12,"div",10),_(13,"div",6),r(14,"div",8)(15,"div",9)(16,"button",11),_(17,"i",12),n(18," Agregar usuario "),t()()(),r(19,"div",13)(20,"button",14),f("click",function(){return m.filterUsers("all")}),n(21,"Todos"),t(),r(22,"button",15),f("click",function(){return m.filterUsers("active")}),n(23,"Activos"),t(),r(24,"button",16),f("click",function(){return m.filterUsers("inactive")}),n(25,"Inactivos"),t()(),r(26,"div",8)(27,"div",9)(28,"table",17)(29,"thead")(30,"tr")(31,"th"),n(32,"Nombre"),t(),r(33,"th"),n(34,"Email"),t(),r(35,"th"),n(36,"Status"),t(),r(37,"th"),n(38,"Actions"),t()()(),r(39,"tbody"),c(40,oe,4,0,"ng-container",18)(41,me,2,1,"tr",19),t()()()()()()()(),r(42,"app-modal",20)(43,"p"),n(44,"\xBFEst\xE1s seguro de activar al usuario?"),t(),r(45,"button",21),f("click",function(){return m.deleteUser()}),n(46,"Activar"),t(),r(47,"button",22),f("click",function(){return m.closemodal()}),n(48,"Cancelar"),t()(),r(49,"app-modal",20)(50,"p"),n(51,"\xBFEst\xE1s seguro de desactivar al usuario?"),t(),r(52,"button",23),f("click",function(){return m.deleteUser()}),n(53,"Desactivar"),t(),r(54,"button",22),f("click",function(){return m.closemodal()}),n(55,"Cancelar"),t()(),r(56,"app-modal",20)(57,"form",24),f("ngSubmit",function(){return m.postUser()}),r(58,"div",25)(59,"label",26),n(60,"Nombre"),t(),_(61,"input",27),c(62,ue,4,3,"div",28),t(),r(63,"div",25)(64,"label",29),n(65,"Email"),t(),_(66,"input",30),c(67,be,4,3,"div",28),t(),r(68,"div",25)(69,"label",31),n(70,"Contrase\xF1a"),t(),_(71,"input",32),c(72,Ee,5,4,"div",28),t(),r(73,"div",33)(74,"label",34),n(75,"Confirmar contrase\xF1a"),t(),_(76,"input",35),c(77,we,5,4,"div",28),t(),r(78,"div",25)(79,"label",36),n(80,"Status"),t(),r(81,"select",37)(82,"option",38),n(83,"Activo"),t(),r(84,"option",39),n(85,"Inactivo"),t()(),c(86,Te,3,2,"div",28),t(),r(87,"div",25)(88,"label",40),n(89,"Rol ID"),t(),r(90,"select",41),c(91,ke,2,2,"option",42),t(),c(92,Ae,3,2,"div",28),t(),r(93,"button",43),n(94,"Agregar"),t(),r(95,"button",44),n(96,"Cancelar"),t()()(),r(97,"app-modal",20)(98,"form")(99,"div",25)(100,"label",26),n(101,"Nombre"),t(),_(102,"input",27),t(),r(103,"div",25)(104,"label",29),n(105,"Email"),t(),_(106,"input",30),t(),r(107,"div",25)(108,"label",31),n(109,"Contrase\xF1a"),t(),_(110,"input",32),t(),r(111,"div",25)(112,"label",36),n(113,"Status"),t(),r(114,"select",37)(115,"option",38),n(116,"Activo"),t(),r(117,"option",39),n(118,"Inactivo"),t()()(),r(119,"div",25)(120,"label",40),n(121,"Rol ID"),t(),r(122,"select",41),c(123,Ne,2,2,"option",42),t()(),r(124,"button",45),n(125,"Editar"),t(),r(126,"button",44),n(127,"Cancelar"),t()()()()),d&2&&(l("ngIf",m.errrorV),a(),l("ngIf",m.msg),a(39),l("ngIf",m.users.data.length===0),a(),l("ngForOf",m.users.data),a(),l("modalId","Activarusuario")("modalTitle","Activar usuario"),a(7),l("modalId","deleteUser")("modalTitle","Desactivar usuario"),a(7),l("modalId","postUser")("modalTitle","Agregar usuario"),a(),l("formGroup",m.PostUserForm),a(5),l("ngIf",m.PostUserForm.controls.name.invalid&&(m.PostUserForm.controls.name.dirty||m.PostUserForm.controls.name.touched)),a(5),l("ngIf",m.PostUserForm.controls.email.invalid&&(m.PostUserForm.controls.email.dirty||m.PostUserForm.controls.email.touched)),a(5),l("ngIf",m.PostUserForm.controls.password.invalid&&(m.PostUserForm.controls.password.dirty||m.PostUserForm.controls.password.touched)),a(5),l("ngIf",m.PostUserForm.controls.password_confirmation.invalid&&(m.PostUserForm.controls.password_confirmation.dirty||m.PostUserForm.controls.password_confirmation.touched)),a(9),l("ngIf",m.PostUserForm.controls.status.invalid&&(m.PostUserForm.controls.status.dirty||m.PostUserForm.controls.status.touched)),a(5),l("ngForOf",m.roles.data),a(),l("ngIf",m.PostUserForm.controls.rol_id.invalid&&(m.PostUserForm.controls.rol_id.dirty||m.PostUserForm.controls.rol_id.touched)),a(),l("disabled",m.PostUserForm.invalid),a(4),l("modalId","putUser")("modalTitle","Editar usuario"),a(26),l("ngForOf",m.roles.data))},dependencies:[A,q,$,H,M,z,B,D,j,V,L,Z,R,O,N],styles:[".add[_ngcontent-%COMP%]{margin:10px;padding:10px;border-radius:5px;background-color:#4caf50;color:#fff;border:none;cursor:pointer;font-size:20px}.border[_ngcontent-%COMP%]{margin:10px;padding:10px;border-radius:5px;background-color:#f2f2f2;color:#000;border:none;cursor:pointer;font-size:20px}"]});let e=o;return e})();export{ze as UsersComponent};
