import{a as $}from"./chunk-4LWGM43U.js";import"./chunk-RHMV3US2.js";import{a as D,b as p,c as A,d as V,e as R,f as j,g as M,h as O,i as L,j as z,k as B,l as G,m as Z}from"./chunk-IPELWIB7.js";import{i as q,j as k,k as N,o as E,r as f}from"./chunk-LYJN6XNL.js";import{Ga as d,Ia as a,La as r,Ma as t,Na as v,Oa as F,P as x,Pa as S,Qa as T,Ra as _,Sa as c,U as b,Xa as s,Y as y,Ya as g,Za as C,ab as w,ea as I,fa as P,ua as l,va as h}from"./chunk-SYTZFNVP.js";var J=(()=>{let n=class n{constructor(o){this.http=o}getUsers(){return this.http.get(`${f.UrlUsers}/index`)}delete(o){return this.http.delete(`${f.UrlUsers}/destroy/${o}`)}postUser(o){return this.http.post(`${f.UrlUsers}/store`,o)}updateUser(o,u){return this.http.put(`${f.UrlUsers}/update/${o}`,u)}getUser(o){return this.http.get(`${f.UrlUsers}/show/${o}`)}};n.\u0275fac=function(u){return new(u||n)(b(E))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var K=(()=>{let n=class n{constructor(o){this.http=o}getRoles(){return this.http.get(`${f.UrlRoles}/index2`)}};n.\u0275fac=function(u){return new(u||n)(b(E))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function Y(e,n){if(e&1&&(r(0,"li"),s(1),t()),e&2){let i=c(2);l(),C("<",i.errors.name,"")}}function ee(e,n){if(e&1&&(r(0,"li"),s(1),t()),e&2){let i=c(2);l(),g(i.errors.email)}}function te(e,n){if(e&1&&(r(0,"li"),s(1),t()),e&2){let i=c(2);l(),g(i.errors.password)}}function re(e,n){if(e&1&&(r(0,"div",40),d(1,Y,2,1,"li",18)(2,ee,2,1,"li",18)(3,te,2,1,"li",18),t()),e&2){let i=c();l(),a("ngIf",i.errors.name),l(),a("ngIf",i.errors.email),l(),a("ngIf",i.errors.password)}}function ie(e,n){if(e&1&&(r(0,"div",41),s(1),t()),e&2){let i=c();l(),C(" ",i.msg,`
`)}}function ne(e,n){e&1&&(F(0),r(1,"tr")(2,"td",42),s(3,"No hay usuarios"),t()(),S())}function oe(e,n){if(e&1){let i=T();F(0),r(1,"td"),s(2),t(),r(3,"td"),s(4),t(),r(5,"td"),s(6),t(),r(7,"td")(8,"button",43),_("click",function(){I(i);let u=c().$implicit,m=c();return P(m.deleteModal(u.id))}),v(9,"i",44),t()(),S()}if(e&2){let i=c().$implicit;l(2),g(i.name),l(2),g(i.email),l(2),g(i.status==1?"Activo":"Inactivo")}}function se(e,n){if(e&1&&(r(0,"tr"),d(1,oe,10,3,"ng-container",18),t()),e&2){let i=n.$implicit,o=c();l(),a("ngIf",o.userfilter=="all"||o.userfilter=="active"&&i.status==1||o.userfilter=="inactive"&&i.status!=1)}}function le(e,n){e&1&&(r(0,"div"),s(1,"El nombre es requerido"),t())}function ae(e,n){e&1&&(r(0,"div"),s(1,"El nombre debe tener al menos 3 caracteres"),t())}function me(e,n){e&1&&(r(0,"div"),s(1,"El nombre no puede tener m\xE1s de 30 caracteres"),t())}function de(e,n){if(e&1&&(r(0,"div",45),d(1,le,2,0,"div",18)(2,ae,2,0,"div",18)(3,me,2,0,"div",18),t()),e&2){let i=c();l(),a("ngIf",i.PostUserForm.controls.name.errors==null?null:i.PostUserForm.controls.name.errors.required),l(),a("ngIf",i.PostUserForm.controls.name.errors==null?null:i.PostUserForm.controls.name.errors.minlength),l(),a("ngIf",i.PostUserForm.controls.name.errors==null?null:i.PostUserForm.controls.name.errors.maxlength)}}function ce(e,n){e&1&&(r(0,"div"),s(1,"El correo electr\xF3nico es requerido"),t())}function pe(e,n){e&1&&(r(0,"div"),s(1,"El correo electr\xF3nico debe ser v\xE1lido"),t())}function ue(e,n){e&1&&(r(0,"div"),s(1,"El correo electr\xF3nico debe seguir el patr\xF3n especificado"),t())}function fe(e,n){if(e&1&&(r(0,"div",45),d(1,ce,2,0,"div",18)(2,pe,2,0,"div",18)(3,ue,2,0,"div",18),t()),e&2){let i=c();l(),a("ngIf",i.PostUserForm.controls.email.errors==null?null:i.PostUserForm.controls.email.errors.required),l(),a("ngIf",i.PostUserForm.controls.email.errors==null?null:i.PostUserForm.controls.email.errors.email),l(),a("ngIf",i.PostUserForm.controls.email.errors==null?null:i.PostUserForm.controls.email.errors.pattern)}}function ve(e,n){e&1&&(r(0,"div"),s(1,"La contrase\xF1a es requerida"),t())}function _e(e,n){e&1&&(r(0,"div"),s(1,"La contrase\xF1a debe tener al menos 8 caracteres"),t())}function ge(e,n){e&1&&(r(0,"div"),s(1,"La contrase\xF1a no puede tener m\xE1s de 230 caracteres"),t())}function Ue(e,n){e&1&&(r(0,"div"),s(1,"La contrase\xF1a debe seguir el patr\xF3n especificado"),t())}function xe(e,n){if(e&1&&(r(0,"div",45),d(1,ve,2,0,"div",18)(2,_e,2,0,"div",18)(3,ge,2,0,"div",18)(4,Ue,2,0,"div",18),t()),e&2){let i=c();l(),a("ngIf",i.PostUserForm.controls.password.errors==null?null:i.PostUserForm.controls.password.errors.required),l(),a("ngIf",i.PostUserForm.controls.password.errors==null?null:i.PostUserForm.controls.password.errors.minlength),l(),a("ngIf",i.PostUserForm.controls.password.errors==null?null:i.PostUserForm.controls.password.errors.maxlength),l(),a("ngIf",i.PostUserForm.controls.password.errors==null?null:i.PostUserForm.controls.password.errors.pattern)}}function be(e,n){e&1&&(r(0,"div"),s(1,"El status es requerido"),t())}function he(e,n){e&1&&(r(0,"div"),s(1,"El status debe ser 0 o 1"),t())}function Ee(e,n){if(e&1&&(r(0,"div",45),d(1,be,2,0,"div",18)(2,he,2,0,"div",18),t()),e&2){let i=c();l(),a("ngIf",i.PostUserForm.controls.status.errors==null?null:i.PostUserForm.controls.status.errors.required),l(),a("ngIf",i.PostUserForm.controls.status.errors==null?null:i.PostUserForm.controls.status.errors.pattern)}}function Fe(e,n){if(e&1&&(r(0,"option",46),s(1),t()),e&2){let i=n.$implicit;a("value",i.id),l(),g(i.rol)}}function Se(e,n){e&1&&(r(0,"div"),s(1,"El Rol ID es requerido"),t())}function Ce(e,n){e&1&&(r(0,"div"),s(1,"El Rol ID debe ser un n\xFAmero"),t())}function ye(e,n){if(e&1&&(r(0,"div",45),d(1,Se,2,0,"div",18)(2,Ce,2,0,"div",18),t()),e&2){let i=c();l(),a("ngIf",i.PostUserForm.controls.rol_id.errors==null?null:i.PostUserForm.controls.rol_id.errors.required),l(),a("ngIf",i.PostUserForm.controls.rol_id.errors==null?null:i.PostUserForm.controls.rol_id.errors.pattern)}}var $e=(()=>{let n=class n{constructor(o,u,m){this.userService=o,this.formBuilde=u,this.rolesSerivce=m,this.users={data:[]},this.userfilter="all",this.userData={name:"",email:"",password:"",status:0,rol_id:0},this.userDataUpdate={name:"",email:"",password:"",status:0,rol_id:0},this.roles={data:[]},this.msg="",this.id=0,this.errrorV=!1,this.errors={name:"",email:"",password:"",status:"",rol_id:""},this.PostUserForm=this.formBuilde.group({name:[this.userData.name,[p.required,p.minLength(3),p.maxLength(30)]],email:[this.userData.email,[p.required,p.email,p.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]],password:[this.userData.password,[p.required,p.minLength(8),p.pattern(/^[a-zA-Z0-9 ]*$/),p.maxLength(230)]],status:[this.userData.status,[p.required,p.pattern(/^[0-1]{1}$/)]],rol_id:[1,[p.required,p.pattern(/^[0-9]{1}$/)]]})}ngOnInit(){this.getUsers(),this.getRoles()}filterUsers(o){this.userfilter=o}deleteModal(o){this.id=o,console.log(this.id)}postUser(){this.PostUserForm.valid&&(this.userData=this.PostUserForm.value,this.userService.postUser(this.userData).subscribe(o=>{this.getUsers(),this.msg=o.msg,setTimeout(()=>{this.msg=""},3e3),this.PostUserForm.reset()},o=>{console.log(o),this.errrorV=!0,this.errors.password=o.error.errors.password,this.errors.email=o.error.errors.email,this.errors.name=o.error.errors.name,this.errors.status=o.error.errors.status,this.errors.rol_id=o.error.errors.rol_id,setTimeout(()=>{this.errrorV=!1,this.errors={name:"",email:"",password:"",status:"",rol_id:""}},3e3)}))}getUsers(){this.userService.getUsers().subscribe(o=>{this.users=o},o=>{console.log(o)})}getRoles(){this.rolesSerivce.getRoles().subscribe(o=>{console.log(o),this.roles=o},o=>{console.log(o)})}deleteUser(){this.userService.delete(this.id).subscribe(o=>{this.getUsers()},o=>{console.log(o)})}};n.\u0275fac=function(u){return new(u||n)(h(J),h(G),h(K))},n.\u0275cmp=y({type:n,selectors:[["app-users"]],standalone:!0,features:[w],decls:85,vars:16,consts:[["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6","text-center"],[1,"card","border-primary","shadow"],[1,"card-body"],[1,"card-title","text-primary"],[1,"row"],[1,"col-md-12"],[1,"card","border","shadow"],["type","button","data-bs-toggle","modal","data-bs-target","#postUser",1,"btn","add"],[1,"bi","bi-person"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"table","table-striped"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"modalId","modalTitle"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","formControlName","name","placeholder","Nombre","required","",1,"form-control"],["class","text-danger",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","name","email","formControlName","email","placeholder","Email","required","",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","name","password","formControlName","password","placeholder","Contrase\xF1a","required","",1,"form-control"],["for","status",1,"form-label"],["id","status","name","status","formControlName","status","required","",1,"form-select"],["value","1"],["value","0"],["for","rol_id",1,"form-label"],["id","rol_id","name","rol_id","formControlName","rol_id","required","",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-success"],["colspan","4",1,"text-center"],["type","button","data-bs-toggle","modal","data-bs-target","#deleteUser",1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash-fill"],[1,"text-danger"],[3,"value"]],template:function(u,m){u&1&&(d(0,re,4,3,"div",0)(1,ie,2,1,"div",1),r(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1",7),s(8,"Usuarios"),t()()()()(),r(9,"div",2)(10,"div",8)(11,"div",9)(12,"div",10),v(13,"div",6),r(14,"div",8)(15,"div",9)(16,"button",11),v(17,"i",12),s(18," Agregar usuario "),t()()(),r(19,"div",13)(20,"button",14),_("click",function(){return m.filterUsers("all")}),s(21,"Todos"),t(),r(22,"button",15),_("click",function(){return m.filterUsers("active")}),s(23,"Activos"),t(),r(24,"button",16),_("click",function(){return m.filterUsers("inactive")}),s(25,"Inactivos"),t()(),r(26,"div",8)(27,"div",9)(28,"table",17)(29,"thead")(30,"tr")(31,"th"),s(32,"Nombre"),t(),r(33,"th"),s(34,"Email"),t(),r(35,"th"),s(36,"Status"),t(),r(37,"th"),s(38,"Actions"),t()()(),r(39,"tbody"),d(40,ne,4,0,"ng-container",18)(41,se,2,1,"tr",19),t()()()()()()()(),r(42,"app-modal",20)(43,"p"),s(44,"\xBFEst\xE1s seguro de desactivar al usuario?"),t(),r(45,"button",21),_("click",function(){return m.deleteUser()}),s(46,"Eliminar"),t(),r(47,"button",22),s(48,"Cancelar"),t()(),r(49,"app-modal",20)(50,"form",23),_("ngSubmit",function(){return m.postUser()}),r(51,"div",24)(52,"label",25),s(53,"Nombre"),t(),v(54,"input",26),d(55,de,4,3,"div",27),t(),r(56,"div",24)(57,"label",28),s(58,"Email"),t(),v(59,"input",29),d(60,fe,4,3,"div",27),t(),r(61,"div",24)(62,"label",30),s(63,"Contrase\xF1a"),t(),v(64,"input",31),d(65,xe,5,4,"div",27),t(),r(66,"div",24)(67,"label",32),s(68,"Status"),t(),r(69,"select",33)(70,"option",34),s(71,"Activo"),t(),r(72,"option",35),s(73,"Inactivo"),t()(),d(74,Ee,3,2,"div",27),t(),r(75,"div",24)(76,"label",36),s(77,"Rol ID"),t(),r(78,"select",37),d(79,Fe,2,2,"option",38),t(),d(80,ye,3,2,"div",27),t(),r(81,"button",39),s(82,"Agregar"),t(),r(83,"button",22),s(84,"Cancelar"),t()()()()),u&2&&(a("ngIf",m.errrorV),l(),a("ngIf",m.msg),l(39),a("ngIf",m.users.data.length===0),l(),a("ngForOf",m.users.data),l(),a("modalId","deleteUser")("modalTitle","Eliminar usuario"),l(7),a("modalId","postUser")("modalTitle","Agregar usuario"),l(),a("formGroup",m.PostUserForm),l(5),a("ngIf",m.PostUserForm.controls.name.invalid&&(m.PostUserForm.controls.name.dirty||m.PostUserForm.controls.name.touched)),l(5),a("ngIf",m.PostUserForm.controls.email.invalid&&(m.PostUserForm.controls.email.dirty||m.PostUserForm.controls.email.touched)),l(5),a("ngIf",m.PostUserForm.controls.password.invalid&&(m.PostUserForm.controls.password.dirty||m.PostUserForm.controls.password.touched)),l(9),a("ngIf",m.PostUserForm.controls.status.invalid&&(m.PostUserForm.controls.status.dirty||m.PostUserForm.controls.status.touched)),l(5),a("ngForOf",m.roles.data),l(),a("ngIf",m.PostUserForm.controls.rol_id.invalid&&(m.PostUserForm.controls.rol_id.dirty||m.PostUserForm.controls.rol_id.touched)),l(),a("disabled",m.PostUserForm.invalid))},dependencies:[N,q,k,Z,R,L,z,D,O,A,V,B,j,M,$],styles:[".add[_ngcontent-%COMP%]{margin:10px;padding:10px;border-radius:5px;background-color:#4caf50;color:#fff;border:none;cursor:pointer;font-size:20px}.border[_ngcontent-%COMP%]{margin:10px;padding:10px;border-radius:5px;background-color:#f2f2f2;color:#000;border:none;cursor:pointer;font-size:20px}"]});let e=n;return e})();export{$e as UsersComponent};
