import{a as k}from"./chunk-5BRVOJ4S.js";import{a as S,b as y}from"./chunk-2SW5W63J.js";import"./chunk-B56ZGRNC.js";import{j as h,k as v,l as x}from"./chunk-NGLC2CXL.js";import{Ga as b,Ka as p,La as n,Ma as i,Na as o,P as d,Ra as u,Xa as r,Y as m,ab as g,d as E,ua as f,va as c}from"./chunk-SYTZFNVP.js";var _=E(y());var w=(()=>{let t=class t{constructor(){}UserRolSocket(){window.Pusher=_.default,this.echo=new S({broadcaster:"pusher",key:"lifePlants09123",cluster:"mt1",encrypted:!0,wsHost:window.location.hostname,wsPort:6001,disableStats:!0,forceTLS:!1}),this.echo.channel("userRol").listen(".UserRol",a=>{console.log(this.echo),console.log(a)})}closeWebSocket(){this.echo&&this.echo.disconnect()}getEcho(){return this.echo}};t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=d({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();function M(s,t){s&1&&(n(0,"tr")(1,"td")(2,"a",30),o(3,"i",31),r(4,"Usuarios"),i()()(),n(5,"tr")(6,"td")(7,"a",32),o(8,"i",33),r(9,"Sensores"),i()()())}var U=(()=>{let t=class t{constructor(a,e,l){this.authService=a,this.router=e,this.socketService=l,this.user_id=0,this.rol_id=0}logout(){this.authService.logout().subscribe(a=>{console.log(a),localStorage.removeItem("token"),this.router.navigate(["/login"])},a=>{console.log(a)})}ngOnInit(){this.authService.me().subscribe(e=>{console.log(e),this.rol_id=e.rol_id,this.user_id=e.id,console.log("variable",this.rol_id),console.log("variable",this.user_id)},e=>{console.log(e)}),this.socketService.UserRolSocket();let a=this.socketService.getEcho();a.channel("userRol").listen(".UserRol",e=>{console.log(a),console.log("socket",e.data.user_id),this.user_id==e.data.user_id&&(this.rol_id=e.data.rol_id,console.log("socket",this.rol_id))})}ngOnDestroy(){this.socketService.closeWebSocket()}};t.\u0275fac=function(e){return new(e||t)(c(k),c(v),c(w))},t.\u0275cmp=m({type:t,selectors:[["app-login-nav-bar"]],standalone:!0,features:[g],decls:46,vars:1,consts:[[1,"navbar","shadow"],[1,"container-fluid"],["routerLink","/lifeplants/home","data-bs-toggle","offcanvas","data-bs-target","#offcanvasExample","aria-controls","offcanvasExample",1,"navbar-brand"],["src","../assets/imagenes/icon.png","alt","",1,"icon"],["routerLink","/lifeplants/home",1,"navbar-brand"],[1,"navbar","me-auto","mb-2","mb-lg-0"],[1,"navbar-item"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasExample",1,"btn","btn-principal"],[1,"bi","bi-list"],[1,"dropdown"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-principal","dropdown-toggle"],[1,"bi","bi-person-circle"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu","dropdown-menu-end"],["routerLink","/lifeplants/perfil",1,"dropdown-item"],[1,"dropdown-divider"],[1,"dropdown-item",3,"click"],["tabindex","-1","id","offcanvasExample","aria-labelledby","offcanvasExampleLabel",1,"offcanvas","offcanvas-start"],[1,"offcanvas-header"],["id","offcanvasExampleLabel",1,"offcanvas-title"],["src","../../assets/imagenes/icon.png","alt","",1,"icon"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","text-reset"],[1,"offcanvas-body","d-flex","bg-dark"],[1,"table","table-dark","fs-3"],["routerLink","/lifeplants/home","data-bs-dismiss","offcanvas"],[1,"bi","bi-house-door","me-2"],["src","../../../assets/imagenes/iconbw.png","alt","",1,"iconplanta"],["routerLink","/lifeplants/plants","data-bs-dismiss","offcanvas"],[1,"bi","bi-leaf","me-2"],["routerLink","/lifeplants/about","data-bs-dismiss","offcanvas"],[1,"bi","bi-info-circle","me-2"],["routerLink","/lifeplants/users","data-bs-dismiss","offcanvas"],[1,"bi","bi-person","me-2"],["routerLink","/lifeplants/sensors","data-bs-dismiss","offcanvas"],[1,"bi","bi-cpu-fill","me-2"]],template:function(e,l){e&1&&(n(0,"nav",0)(1,"div",1)(2,"a",2),o(3,"img",3),i(),n(4,"a",4),r(5,"Life plants"),i(),n(6,"ul",5)(7,"li",6)(8,"button",7),o(9,"i",8),i()()(),n(10,"div",9)(11,"button",10),o(12,"i",11),i(),n(13,"div",12)(14,"a",13),r(15,"Perfil"),i(),o(16,"div",14),n(17,"a",15),u("click",function(){return l.logout()}),r(18,"Cerrar sesion"),i()()()()(),n(19,"div",16)(20,"div",17)(21,"h5",18),o(22,"img",19),r(23,"Men\xFA"),i(),o(24,"button",20),i(),n(25,"div",21)(26,"table",22)(27,"tbody")(28,"tr")(29,"td")(30,"a",23),o(31,"i",24),r(32,"Inicio"),i()()(),n(33,"tr")(34,"td"),o(35,"img",25),n(36,"a",26),o(37,"i",27),r(38,"Plantas"),i()()(),b(39,M,10,0),n(40,"tr")(41,"td")(42,"a",28),o(43,"i",29),r(44,"Acerca de"),i()()()()()()(),o(45,"router-outlet")),e&2&&(f(39),p(39,l.rol_id==2?39:-1))},dependencies:[h,x],styles:[".navbar[_ngcontent-%COMP%]{background-color:#00c881;color:#fff;padding:10px;font-size:18px;font-weight:700;text-align:center}.navbar-item[_ngcontent-%COMP%]{margin-right:10px}.icon[_ngcontent-%COMP%]{width:50px}.offcanvas-header[_ngcontent-%COMP%]{background-color:#00c881}.offcanvas-body[_ngcontent-%COMP%]{background-color:#1a1919}.footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#1b1b1b;position:fixed;bottom:0;width:100%}dropdown-menu[_ngcontent-%COMP%]{position:fixed}.card-header[_ngcontent-%COMP%]{background-color:#00c881}.btn-principal[_ngcontent-%COMP%]{background-color:#743c07;color:#fff;border:none;padding:10px 20px;cursor:pointer;border-radius:5px}.offcanvas-body[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.iconplanta[_ngcontent-%COMP%]{width:29px;height:35px;filter:invert(1)}"]});let s=t;return s})();export{U as LoginNavBarComponent};
