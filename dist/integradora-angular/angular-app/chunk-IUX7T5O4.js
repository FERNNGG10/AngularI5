import{a as D}from"./chunk-4LWGM43U.js";import"./chunk-CYYQABC5.js";import{a as A,b as m,c as N,d as $,e as L,f as M,g as V,h as z,i as R,j as O,k as Z,l as j,m as B,n as G}from"./chunk-MA4US5VA.js";import{i as P,j as w,k as q,o as k,r as f}from"./chunk-VOBKW546.js";import{Ga as p,Ia as d,La as r,Ma as t,Na as _,Oa as E,P as S,Pa as h,Qa as I,Ra as v,Sa as u,U as C,Xa as n,Y as y,Ya as g,ab as T,ea as b,fa as x,ua as s,va as F}from"./chunk-SYTZFNVP.js";var H=(()=>{let o=class o{constructor(a){this.http=a}getUsers(){return this.http.get(`${f.UrlUsers}/index`)}delete(a){return this.http.delete(`${f.UrlUsers}/destroy/${a}`)}postUser(a){return this.http.post(`${f.UrlUsers}/store`,a)}updateUser(a,c){return this.http.put(`${f.UrlUsers}/update/${a}`,c)}getUser(a){return this.http.get(`${f.UrlUsers}/show/${a}`)}};o.\u0275fac=function(c){return new(c||o)(C(k))},o.\u0275prov=S({token:o,factory:o.\u0275fac,providedIn:"root"});let e=o;return e})();function W(e,o){e&1&&(E(0),r(1,"tr")(2,"td",37),n(3,"No hay usuarios"),t()(),h())}function X(e,o){if(e&1){let i=I();E(0),r(1,"td"),n(2),t(),r(3,"td"),n(4),t(),r(5,"td"),n(6),t(),r(7,"td")(8,"button",38),v("click",function(){b(i);let c=u().$implicit,l=u();return x(l.editModal(c.id,c.name,c.email,c.status,c.rol_id))}),_(9,"i",39),t(),r(10,"button",40),v("click",function(){b(i);let c=u().$implicit,l=u();return x(l.deleteModal(c.id))}),_(11,"i",41),t()(),h()}if(e&2){let i=u().$implicit;s(2),g(i.name),s(2),g(i.email),s(2),g(i.status==1?"Activo":"Inactivo")}}function Y(e,o){if(e&1&&(r(0,"tr"),p(1,X,12,3,"ng-container",16),t()),e&2){let i=o.$implicit,a=u();s(),d("ngIf",a.userfilter=="all"||a.userfilter=="active"&&i.status==1||a.userfilter=="inactive"&&i.status!=1)}}function ee(e,o){e&1&&(r(0,"div"),n(1,"El nombre es requerido"),t())}function te(e,o){e&1&&(r(0,"div"),n(1,"El nombre debe tener al menos 3 caracteres"),t())}function re(e,o){e&1&&(r(0,"div"),n(1,"El nombre no puede tener m\xE1s de 30 caracteres"),t())}function ie(e,o){if(e&1&&(r(0,"div",42),p(1,ee,2,0,"div",16)(2,te,2,0,"div",16)(3,re,2,0,"div",16),t()),e&2){let i=u();s(),d("ngIf",i.PostUserForm.controls.name.errors==null?null:i.PostUserForm.controls.name.errors.required),s(),d("ngIf",i.PostUserForm.controls.name.errors==null?null:i.PostUserForm.controls.name.errors.minlength),s(),d("ngIf",i.PostUserForm.controls.name.errors==null?null:i.PostUserForm.controls.name.errors.maxlength)}}function ne(e,o){e&1&&(r(0,"div"),n(1,"El correo electr\xF3nico es requerido"),t())}function oe(e,o){e&1&&(r(0,"div"),n(1,"El correo electr\xF3nico debe ser v\xE1lido"),t())}function se(e,o){e&1&&(r(0,"div"),n(1,"El correo electr\xF3nico debe seguir el patr\xF3n especificado"),t())}function ae(e,o){if(e&1&&(r(0,"div",42),p(1,ne,2,0,"div",16)(2,oe,2,0,"div",16)(3,se,2,0,"div",16),t()),e&2){let i=u();s(),d("ngIf",i.PostUserForm.controls.email.errors==null?null:i.PostUserForm.controls.email.errors.required),s(),d("ngIf",i.PostUserForm.controls.email.errors==null?null:i.PostUserForm.controls.email.errors.email),s(),d("ngIf",i.PostUserForm.controls.email.errors==null?null:i.PostUserForm.controls.email.errors.pattern)}}function le(e,o){e&1&&(r(0,"div"),n(1,"La contrase\xF1a es requerida"),t())}function de(e,o){e&1&&(r(0,"div"),n(1,"La contrase\xF1a debe tener al menos 8 caracteres"),t())}function me(e,o){e&1&&(r(0,"div"),n(1,"La contrase\xF1a no puede tener m\xE1s de 230 caracteres"),t())}function pe(e,o){e&1&&(r(0,"div"),n(1,"La contrase\xF1a debe seguir el patr\xF3n especificado"),t())}function ce(e,o){if(e&1&&(r(0,"div",42),p(1,le,2,0,"div",16)(2,de,2,0,"div",16)(3,me,2,0,"div",16)(4,pe,2,0,"div",16),t()),e&2){let i=u();s(),d("ngIf",i.PostUserForm.controls.password.errors==null?null:i.PostUserForm.controls.password.errors.required),s(),d("ngIf",i.PostUserForm.controls.password.errors==null?null:i.PostUserForm.controls.password.errors.minlength),s(),d("ngIf",i.PostUserForm.controls.password.errors==null?null:i.PostUserForm.controls.password.errors.maxlength),s(),d("ngIf",i.PostUserForm.controls.password.errors==null?null:i.PostUserForm.controls.password.errors.pattern)}}function ue(e,o){e&1&&(r(0,"div"),n(1,"El status es requerido"),t())}function _e(e,o){e&1&&(r(0,"div"),n(1,"El status debe ser 0 o 1"),t())}function ve(e,o){if(e&1&&(r(0,"div",42),p(1,ue,2,0,"div",16)(2,_e,2,0,"div",16),t()),e&2){let i=u();s(),d("ngIf",i.PostUserForm.controls.status.errors==null?null:i.PostUserForm.controls.status.errors.required),s(),d("ngIf",i.PostUserForm.controls.status.errors==null?null:i.PostUserForm.controls.status.errors.pattern)}}function Ue(e,o){e&1&&(r(0,"div"),n(1,"El Rol ID es requerido"),t())}function fe(e,o){e&1&&(r(0,"div"),n(1,"El Rol ID debe ser un n\xFAmero"),t())}function ge(e,o){if(e&1&&(r(0,"div",42),p(1,Ue,2,0,"div",16)(2,fe,2,0,"div",16),t()),e&2){let i=u();s(),d("ngIf",i.PostUserForm.controls.rol_id.errors==null?null:i.PostUserForm.controls.rol_id.errors.required),s(),d("ngIf",i.PostUserForm.controls.rol_id.errors==null?null:i.PostUserForm.controls.rol_id.errors.pattern)}}function be(e,o){e&1&&(r(0,"div"),n(1,"El nombre es requerido"),t())}function xe(e,o){e&1&&(r(0,"div"),n(1,"El nombre debe tener al menos 3 caracteres"),t())}function Fe(e,o){e&1&&(r(0,"div"),n(1,"El nombre no puede tener m\xE1s de 30 caracteres"),t())}function Ee(e,o){if(e&1&&(r(0,"div",42),p(1,be,2,0,"div",16)(2,xe,2,0,"div",16)(3,Fe,2,0,"div",16),t()),e&2){let i=u();s(),d("ngIf",i.UpdateUserForm.controls.name.errors==null?null:i.UpdateUserForm.controls.name.errors.required),s(),d("ngIf",i.UpdateUserForm.controls.name.errors==null?null:i.UpdateUserForm.controls.name.errors.minlength),s(),d("ngIf",i.UpdateUserForm.controls.name.errors==null?null:i.UpdateUserForm.controls.name.errors.maxlength)}}function he(e,o){e&1&&(r(0,"div"),n(1,"El correo electr\xF3nico es requerido"),t())}function Se(e,o){e&1&&(r(0,"div"),n(1,"El correo electr\xF3nico debe ser v\xE1lido"),t())}function Ce(e,o){e&1&&(r(0,"div"),n(1,"El correo electr\xF3nico debe seguir el patr\xF3n especificado"),t())}function ye(e,o){if(e&1&&(r(0,"div",42),p(1,he,2,0,"div",16)(2,Se,2,0,"div",16)(3,Ce,2,0,"div",16),t()),e&2){let i=u();s(),d("ngIf",i.UpdateUserForm.controls.email.errors==null?null:i.UpdateUserForm.controls.email.errors.required),s(),d("ngIf",i.UpdateUserForm.controls.email.errors==null?null:i.UpdateUserForm.controls.email.errors.email),s(),d("ngIf",i.UpdateUserForm.controls.email.errors==null?null:i.UpdateUserForm.controls.email.errors.pattern)}}function Ie(e,o){e&1&&(r(0,"div"),n(1,"La contrase\xF1a debe tener al menos 8 caracteres"),t())}function Te(e,o){e&1&&(r(0,"div"),n(1,"La contrase\xF1a no puede tener m\xE1s de 230 caracteres"),t())}function Pe(e,o){e&1&&(r(0,"div"),n(1,"La contrase\xF1a debe seguir el patr\xF3n especificado"),t())}function we(e,o){if(e&1&&(r(0,"div",42),p(1,Ie,2,0,"div",16)(2,Te,2,0,"div",16)(3,Pe,2,0,"div",16),t()),e&2){let i=u();s(),d("ngIf",i.UpdateUserForm.controls.password.errors==null?null:i.UpdateUserForm.controls.password.errors.minlength),s(),d("ngIf",i.UpdateUserForm.controls.password.errors==null?null:i.UpdateUserForm.controls.password.errors.maxlength),s(),d("ngIf",i.UpdateUserForm.controls.password.errors==null?null:i.UpdateUserForm.controls.password.errors.pattern)}}function qe(e,o){e&1&&(r(0,"div"),n(1,"El status es requerido"),t())}function ke(e,o){e&1&&(r(0,"div"),n(1,"El status debe ser 0 o 1"),t())}function De(e,o){if(e&1&&(r(0,"div",42),p(1,qe,2,0,"div",16)(2,ke,2,0,"div",16),t()),e&2){let i=u();s(),d("ngIf",i.UpdateUserForm.controls.status.errors==null?null:i.UpdateUserForm.controls.status.errors.required),s(),d("ngIf",i.UpdateUserForm.controls.status.errors==null?null:i.UpdateUserForm.controls.status.errors.pattern)}}function Ae(e,o){e&1&&(r(0,"div"),n(1,"El Rol ID es requerido"),t())}function Ne(e,o){e&1&&(r(0,"div"),n(1,"El Rol ID debe ser un n\xFAmero"),t())}function $e(e,o){if(e&1&&(r(0,"div",42),p(1,Ae,2,0,"div",16)(2,Ne,2,0,"div",16),t()),e&2){let i=u();s(),d("ngIf",i.UpdateUserForm.controls.rol_id.errors==null?null:i.UpdateUserForm.controls.rol_id.errors.required),s(),d("ngIf",i.UpdateUserForm.controls.rol_id.errors==null?null:i.UpdateUserForm.controls.rol_id.errors.pattern)}}var je=(()=>{let o=class o{constructor(a,c){this.userService=a,this.formBuilde=c,this.users={data:[]},this.userfilter="all",this.userData={name:"",email:"",password:"",status:0,rol_id:0},this.userDataUpdate={name:"",email:"",password:"",status:0,rol_id:0},this.id=0,this.errors={name:"",email:"",password:"",status:"",rol_id:""},this.PostUserForm=this.formBuilde.group({name:[this.userData.name,[m.required,m.minLength(3),m.maxLength(30)]],email:[this.userData.email,[m.required,m.email,m.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]],password:[this.userData.password,[m.required,m.minLength(8),m.pattern(/^[a-zA-Z0-9 ]*$/),m.maxLength(230)]],status:[this.userData.status,[m.required,m.pattern(/^[0-1]{1}$/)]],rol_id:[this.userData.rol_id,[m.required,m.pattern(/^[0-9]{1}$/)]]}),this.UpdateUserForm=this.formBuilde.group({name:["",[m.required,m.minLength(3),m.maxLength(30)]],email:["",[m.required,m.email,m.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]],password:["",[m.minLength(8),m.pattern(/^[a-zA-Z0-9 ]*$/),m.maxLength(230)]],status:[0,[m.required,m.pattern(/^[0-1]{1}$/)]],rol_id:[0,[m.required,m.pattern(/^[0-9]{1}$/)]]})}ngOnInit(){this.getUsers()}filterUsers(a){this.userfilter=a}deleteModal(a){this.id=a}editModal(a,c,l,U,J){a=this.id,this.UpdateUserForm.setValue({name:c,email:l,status:U,rol_id:J}),console.log(this.UpdateUserForm.value)}closeModal(){this.id=0,this.UpdateUserForm.reset()}deleteUser(){this.userService.delete(this.id).subscribe(a=>{this.getUsers()},a=>{console.log(a)})}updateUser(){this.UpdateUserForm.valid&&(this.userDataUpdate=this.UpdateUserForm.value,this.userService.updateUser(this.id,this.userDataUpdate).subscribe(a=>{this.getUsers(),this.UpdateUserForm.reset()},a=>{console.log(a),this.errors.password=a.error.errors.password,this.errors.email=a.error.errors.email,this.errors.name=a.error.errors.name,this.errors.status=a.error.errors.status,this.errors.rol_id=a.error.errors.rol_id,setTimeout(()=>{this.errors={name:"",email:"",password:"",status:"",rol_id:""}},3e3)}))}postUser(){this.PostUserForm.valid&&(this.userData=this.PostUserForm.value,this.userService.postUser(this.userData).subscribe(a=>{this.getUsers(),this.PostUserForm.reset()},a=>{console.log(a),this.errors.password=a.error.errors.password,this.errors.email=a.error.errors.email,this.errors.name=a.error.errors.name,this.errors.status=a.error.errors.status,this.errors.rol_id=a.error.errors.rol_id,setTimeout(()=>{this.errors={name:"",email:"",password:"",status:"",rol_id:""}},3e3)}))}getUsers(){this.userService.getUsers().subscribe(a=>{this.users=a},a=>{console.log(a)})}};o.\u0275fac=function(c){return new(c||o)(F(H),F(B))},o.\u0275cmp=y({type:o,selectors:[["app-users"]],standalone:!0,features:[T],decls:117,vars:22,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6","text-center"],[1,"card","border-primary","shadow"],[1,"card-body"],[1,"card-title","text-primary"],[1,"row"],[1,"col-md-12"],[1,"card","border","shadow"],["type","button","data-bs-toggle","modal","data-bs-target","#postUser",1,"btn","add"],[1,"bi","bi-person"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"table","table-striped"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"modalId","modalTitle"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","formControlName","name","placeholder","Nombre","required","",1,"form-control"],["class","text-danger",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","name","email","formControlName","email","placeholder","Email","required","",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","name","password","formControlName","password","placeholder","Contrase\xF1a","required","",1,"form-control"],["for","status",1,"form-label"],["id","status","name","status","formControlName","status","required","",1,"form-select"],["value","1"],["value","0"],["for","rol_id",1,"form-label"],["type","number","id","rol_id","name","rol_id","formControlName","rol_id","placeholder","Rol ID","required","",1,"form-control"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled"],["colspan","4",1,"text-center"],["type","button","data-bs-toggle","modal","data-bs-target","#putUser",1,"btn","btn-warning",3,"click"],[1,"bi","bi-pencil-fill"],["type","button","data-bs-toggle","modal","data-bs-target","#deleteUser",1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash-fill"],[1,"text-danger"]],template:function(c,l){c&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),n(6,"Usuarios"),t()()()()(),r(7,"div",0)(8,"div",6)(9,"div",7)(10,"div",8),_(11,"div",4),r(12,"div",6)(13,"div",7)(14,"button",9),_(15,"i",10),n(16," Agregar usuario "),t()()(),r(17,"div",11)(18,"button",12),v("click",function(){return l.filterUsers("all")}),n(19,"Todos"),t(),r(20,"button",13),v("click",function(){return l.filterUsers("active")}),n(21,"Activos"),t(),r(22,"button",14),v("click",function(){return l.filterUsers("inactive")}),n(23,"Inactivos"),t()(),r(24,"div",6)(25,"div",7)(26,"table",15)(27,"thead")(28,"tr")(29,"th"),n(30,"Nombre"),t(),r(31,"th"),n(32,"Email"),t(),r(33,"th"),n(34,"Status"),t(),r(35,"th"),n(36,"Actions"),t()()(),r(37,"tbody"),p(38,W,4,0,"ng-container",16)(39,Y,2,1,"tr",17),t()()()()()()()(),r(40,"app-modal",18)(41,"p"),n(42,"\xBFEst\xE1s seguro de desactivar al usuario?"),t(),r(43,"button",19),v("click",function(){return l.deleteUser()}),n(44,"Eliminar"),t(),r(45,"button",20),n(46,"Cancelar"),t()(),r(47,"app-modal",18)(48,"form",21),v("ngSubmit",function(){return l.postUser()}),r(49,"div",22)(50,"label",23),n(51,"Nombre"),t(),_(52,"input",24),p(53,ie,4,3,"div",25),t(),r(54,"div",22)(55,"label",26),n(56,"Email"),t(),_(57,"input",27),p(58,ae,4,3,"div",25),t(),r(59,"div",22)(60,"label",28),n(61,"Contrase\xF1a"),t(),_(62,"input",29),p(63,ce,5,4,"div",25),t(),r(64,"div",22)(65,"label",30),n(66,"Status"),t(),r(67,"select",31)(68,"option",32),n(69,"Activo"),t(),r(70,"option",33),n(71,"Inactivo"),t()(),p(72,ve,3,2,"div",25),t(),r(73,"div",22)(74,"label",34),n(75,"Rol ID"),t(),_(76,"input",35),p(77,ge,3,2,"div",25),t(),r(78,"button",36),n(79,"Agregar"),t(),r(80,"button",20),n(81,"Cancelar"),t()()(),r(82,"app-modal",18)(83,"form",21),v("ngSubmit",function(){return l.updateUser()}),r(84,"div",22)(85,"label",23),n(86,"Nombre"),t(),_(87,"input",24),p(88,Ee,4,3,"div",25),t(),r(89,"div",22)(90,"label",26),n(91,"Email"),t(),_(92,"input",27),p(93,ye,4,3,"div",25),t(),r(94,"div",22)(95,"label",28),n(96,"Contrase\xF1a"),t(),_(97,"input",29),p(98,we,4,3,"div",25),t(),r(99,"div",22)(100,"label",30),n(101,"Status"),t(),r(102,"select",31)(103,"option",32),n(104,"Activo"),t(),r(105,"option",33),n(106,"Inactivo"),t()(),p(107,De,3,2,"div",25),t(),r(108,"div",22)(109,"label",34),n(110,"Rol ID"),t(),_(111,"input",35),p(112,$e,3,2,"div",25),t(),r(113,"button",36),n(114,"Editar"),t(),r(115,"button",20),n(116,"Cancelar"),t()()()()),c&2&&(s(38),d("ngIf",l.users.data.length===0),s(),d("ngForOf",l.users.data),s(),d("modalId","deleteUser")("modalTitle","Eliminar usuario"),s(7),d("modalId","postUser")("modalTitle","Agregar usuario"),s(),d("formGroup",l.PostUserForm),s(5),d("ngIf",l.PostUserForm.controls.name.invalid&&(l.PostUserForm.controls.name.dirty||l.PostUserForm.controls.name.touched)),s(5),d("ngIf",l.PostUserForm.controls.email.invalid&&(l.PostUserForm.controls.email.dirty||l.PostUserForm.controls.email.touched)),s(5),d("ngIf",l.PostUserForm.controls.password.invalid&&(l.PostUserForm.controls.password.dirty||l.PostUserForm.controls.password.touched)),s(9),d("ngIf",l.PostUserForm.controls.status.invalid&&(l.PostUserForm.controls.status.dirty||l.PostUserForm.controls.status.touched)),s(5),d("ngIf",l.PostUserForm.controls.rol_id.invalid&&(l.PostUserForm.controls.rol_id.dirty||l.PostUserForm.controls.rol_id.touched)),s(),d("disabled",l.PostUserForm.invalid),s(4),d("modalId","putUser")("modalTitle","Editar usuario"),s(),d("formGroup",l.UpdateUserForm),s(5),d("ngIf",l.UpdateUserForm.controls.name.invalid&&(l.UpdateUserForm.controls.name.dirty||l.UpdateUserForm.controls.name.touched)),s(5),d("ngIf",l.UpdateUserForm.controls.email.invalid&&(l.UpdateUserForm.controls.email.dirty||l.UpdateUserForm.controls.email.touched)),s(5),d("ngIf",l.UpdateUserForm.controls.password.invalid&&(l.UpdateUserForm.controls.password.dirty||l.UpdateUserForm.controls.password.touched)),s(9),d("ngIf",l.UpdateUserForm.controls.status.invalid&&(l.UpdateUserForm.controls.status.dirty||l.UpdateUserForm.controls.status.touched)),s(5),d("ngIf",l.UpdateUserForm.controls.rol_id.invalid&&(l.UpdateUserForm.controls.rol_id.dirty||l.UpdateUserForm.controls.rol_id.touched)),s(),d("disabled",l.UpdateUserForm.invalid))},dependencies:[q,P,w,G,L,O,Z,A,M,R,N,$,j,V,z,D],styles:[".add[_ngcontent-%COMP%]{margin:10px;padding:10px;border-radius:5px;background-color:#4caf50;color:#fff;border:none;cursor:pointer;font-size:20px}.border[_ngcontent-%COMP%]{margin:10px;padding:10px;border-radius:5px;background-color:#f2f2f2;color:#000;border:none;cursor:pointer;font-size:20px}"]});let e=o;return e})();export{je as UsersComponent};
