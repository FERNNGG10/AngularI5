import{a as P}from"./chunk-HJVEYBOB.js";import{a as F,b as p,c as S,d as y,e as I,f as E,g as M,l as T,m as L}from"./chunk-IPELWIB7.js";import{j as x,k as _}from"./chunk-LYJN6XNL.js";import{Ga as c,Ia as l,La as t,Ma as r,Na as u,Ra as C,Sa as g,Xa as o,Y as v,Ya as b,Za as f,ab as w,ua as n,va as h}from"./chunk-SYTZFNVP.js";function D(e,i){if(e&1&&(t(0,"div",23),o(1),r()),e&2){let s=g();n(),f(" ",s.msg,`
`)}}function N(e,i){if(e&1&&(t(0,"div",24),o(1),r()),e&2){let s=g();n(),f(" ",s.errors.password,`
`)}}function O(e,i){e&1&&(t(0,"div"),o(1,"La contrase\xF1a es requerida"),r())}function G(e,i){e&1&&(t(0,"div"),o(1,"La contrase\xF1a debe tener al menos 8 caracteres"),r())}function R(e,i){e&1&&(t(0,"div"),o(1,"La contrase\xF1a debe ser alfanum\xE9rica"),r())}function q(e,i){if(e&1&&(t(0,"div",25),c(1,O,2,0,"div",26)(2,G,2,0,"div",26)(3,R,2,0,"div",26),r()),e&2){let s=g();n(),l("ngIf",s.ChangePasswordForm.controls.password.errors==null?null:s.ChangePasswordForm.controls.password.errors.required),n(),l("ngIf",s.ChangePasswordForm.controls.password.errors==null?null:s.ChangePasswordForm.controls.password.errors.minLength),n(),l("ngIf",s.ChangePasswordForm.controls.password.errors==null?null:s.ChangePasswordForm.controls.password.errors.pattern)}}var $=(()=>{let i=class i{constructor(a,m){this.authService=a,this.formBuilder=m,this.MeResponse={id:0,name:"",email:"",email_verified_at:"",status:0,created_at:"",updated_at:"",plant_count:0,rol_id:0},this.ChangePasswordData={password:""},this.msg="",this.errors={password:""},this.ChangePasswordForm=this.formBuilder.group({password:[this.ChangePasswordData.password,[p.required,p.minLength(8),p.pattern(/^[a-zA-Z0-9 ]*$/),p.maxLength(230),p.maxLength(230)]]})}ngOnInit(){this.me()}changePassword(){this.ChangePasswordForm.valid&&(this.ChangePasswordData=this.ChangePasswordForm.value,this.authService.changepassword(this.ChangePasswordData).subscribe(a=>{console.log(a),this.msg=a.msg,setTimeout(()=>{this.msg=""},3e3)},a=>{console.log(a),this.errors=a.error.errors.password,setTimeout(()=>{this.errors={password:""}},3e3)}))}me(){this.authService.me().subscribe(a=>{console.log(a),this.MeResponse=a},a=>{console.log(a)})}};i.\u0275fac=function(m){return new(m||i)(h(P),h(T))},i.\u0275cmp=v({type:i,selectors:[["app-profile"]],standalone:!0,features:[w],decls:33,vars:7,consts:[["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"profile-container"],[1,"profile-picture"],["src","../../assets/imagenes/gato.png","alt","Profile Picture"],[1,"profile-details"],["id","plant-count"],["id","change-password","data-bs-toggle","modal","data-bs-target","#CambiarContrase\xF1a"],["id","CambiarContrase\xF1a","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Ingresa tu contrase\xF1a","formControlName","password",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"],[1,"text-danger"],[4,"ngIf"]],template:function(m,d){m&1&&(c(0,D,2,1,"div",0)(1,N,2,1,"div",1),t(2,"div",2)(3,"div",3),u(4,"img",4),r(),t(5,"div",5)(6,"h2"),o(7),r(),t(8,"p"),o(9,"Plantas que tengo:"),t(10,"span",6),o(11),r()(),t(12,"button",7),o(13,"Cambiar Contrase\xF1a"),r()()(),t(14,"div",8)(15,"div",9)(16,"div",10)(17,"div",11)(18,"h1",12),o(19,"Cambia tu contrase\xF1a"),r(),u(20,"button",13),r(),t(21,"div",14)(22,"form",15),C("ngSubmit",function(){return d.changePassword()}),t(23,"div",16)(24,"label",17),o(25,"Contrase\xF1a"),r(),u(26,"input",18),c(27,q,4,3,"div",19),t(28,"div",20)(29,"button",21),o(30,"Cerrar"),r(),t(31,"button",22),o(32,"Guardar cambios"),r()()()()()()()()),m&2&&(l("ngIf",d.msg),n(),l("ngIf",d.errors.password),n(6),b(d.MeResponse.name),n(4),f(" ",d.MeResponse.plant_count,""),n(11),l("formGroup",d.ChangePasswordForm),n(5),l("ngIf",d.ChangePasswordForm.controls.password.invalid&&(d.ChangePasswordForm.controls.password.dirty||d.ChangePasswordForm.controls.password.touched)),n(4),l("disabled",d.ChangePasswordForm.invalid))},dependencies:[_,x,L,I,F,S,y,E,M],styles:[".profile-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px}.profile-picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover}.profile-details[_ngcontent-%COMP%]{margin-top:20px;text-align:center}#change-password[_ngcontent-%COMP%]{margin-top:10px;padding:10px 20px;background-color:#4caf50;color:#fff;border:none;border-radius:5px;cursor:pointer}@media screen and (max-width: 600px){.profile-container[_ngcontent-%COMP%]{padding:10px}}"]});let e=i;return e})();export{$ as ProfileComponent};
