import{a as $}from"./chunk-4LWGM43U.js";import"./chunk-RHMV3US2.js";import{a as A,b as d,c as D,d as L,e as V,f as R,g as j,h as M,i as O,j as z,k as B,l as Z,m as G}from"./chunk-IPELWIB7.js";import{i as q,j as k,k as N,o as F,r as _}from"./chunk-LYJN6XNL.js";import{Ga as c,Ia as l,La as i,Ma as t,Na as f,Oa as E,P as x,Pa as C,Qa as w,Ra as v,Sa as p,U as b,Xa as o,Y as y,Ya as g,Za as S,ab as T,ea as I,fa as P,ua as a,va as h}from"./chunk-SYTZFNVP.js";var J=(()=>{let n=class n{constructor(s){this.http=s}getUsers(){return this.http.get(`${_.UrlUsers}/index`)}delete(s){return this.http.delete(`${_.UrlUsers}/destroy/${s}`)}postUser(s){return this.http.post(`${_.UrlUsers}/store`,s)}updateUser(s,u){return this.http.put(`${_.UrlUsers}/update/${s}`,u)}getUser(s){return this.http.get(`${_.UrlUsers}/show/${s}`)}};n.\u0275fac=function(u){return new(u||n)(b(F))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var K=(()=>{let n=class n{constructor(s){this.http=s}getRoles(){return this.http.get(`${_.UrlRoles}/index2`)}};n.\u0275fac=function(u){return new(u||n)(b(F))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function Y(e,n){if(e&1&&(i(0,"li"),o(1),t()),e&2){let r=p(2);a(),S("<",r.errors.name,"")}}function ee(e,n){if(e&1&&(i(0,"li"),o(1),t()),e&2){let r=p(2);a(),g(r.errors.email)}}function te(e,n){if(e&1&&(i(0,"li"),o(1),t()),e&2){let r=p(2);a(),g(r.errors.password)}}function re(e,n){if(e&1&&(i(0,"div",43),c(1,Y,2,1,"li",18)(2,ee,2,1,"li",18)(3,te,2,1,"li",18),t()),e&2){let r=p();a(),l("ngIf",r.errors.name),a(),l("ngIf",r.errors.email),a(),l("ngIf",r.errors.password)}}function ie(e,n){if(e&1&&(i(0,"div",44),o(1),t()),e&2){let r=p();a(),S(" ",r.msg,`
`)}}function ne(e,n){e&1&&(E(0),i(1,"tr")(2,"td",45),o(3,"No hay usuarios"),t()(),C())}function oe(e,n){if(e&1){let r=w();E(0),i(1,"td"),o(2),t(),i(3,"td"),o(4),t(),i(5,"td"),o(6),t(),i(7,"td")(8,"button",46),v("click",function(){I(r);let u=p().$implicit,m=p();return P(m.deleteModal(u.id))}),f(9,"i",47),t()(),C()}if(e&2){let r=p().$implicit;a(2),g(r.name),a(2),g(r.email),a(2),g(r.status==1?"Activo":"Inactivo")}}function se(e,n){if(e&1&&(i(0,"tr"),c(1,oe,10,3,"ng-container",18),t()),e&2){let r=n.$implicit,s=p();a(),l("ngIf",s.userfilter=="all"||s.userfilter=="active"&&r.status==1||s.userfilter=="inactive"&&r.status!=1)}}function ae(e,n){e&1&&(i(0,"div"),o(1,"El nombre es requerido"),t())}function le(e,n){e&1&&(i(0,"div"),o(1,"El nombre debe tener al menos 3 caracteres"),t())}function me(e,n){e&1&&(i(0,"div"),o(1,"El nombre no puede tener m\xE1s de 30 caracteres"),t())}function de(e,n){if(e&1&&(i(0,"div",48),c(1,ae,2,0,"div",18)(2,le,2,0,"div",18)(3,me,2,0,"div",18),t()),e&2){let r=p();a(),l("ngIf",r.PostUserForm.controls.name.errors==null?null:r.PostUserForm.controls.name.errors.required),a(),l("ngIf",r.PostUserForm.controls.name.errors==null?null:r.PostUserForm.controls.name.errors.minlength),a(),l("ngIf",r.PostUserForm.controls.name.errors==null?null:r.PostUserForm.controls.name.errors.maxlength)}}function ce(e,n){e&1&&(i(0,"div"),o(1,"El correo electr\xF3nico es requerido"),t())}function pe(e,n){e&1&&(i(0,"div"),o(1,"El correo electr\xF3nico debe ser v\xE1lido"),t())}function ue(e,n){e&1&&(i(0,"div"),o(1,"El correo electr\xF3nico debe seguir el patr\xF3n especificado"),t())}function fe(e,n){if(e&1&&(i(0,"div",48),c(1,ce,2,0,"div",18)(2,pe,2,0,"div",18)(3,ue,2,0,"div",18),t()),e&2){let r=p();a(),l("ngIf",r.PostUserForm.controls.email.errors==null?null:r.PostUserForm.controls.email.errors.required),a(),l("ngIf",r.PostUserForm.controls.email.errors==null?null:r.PostUserForm.controls.email.errors.email),a(),l("ngIf",r.PostUserForm.controls.email.errors==null?null:r.PostUserForm.controls.email.errors.pattern)}}function _e(e,n){e&1&&(i(0,"div"),o(1,"La contrase\xF1a es requerida"),t())}function ve(e,n){e&1&&(i(0,"div"),o(1,"La contrase\xF1a debe tener al menos 8 caracteres"),t())}function ge(e,n){e&1&&(i(0,"div"),o(1,"La contrase\xF1a no puede tener m\xE1s de 230 caracteres"),t())}function Ue(e,n){e&1&&(i(0,"div"),o(1,"La contrase\xF1a debe seguir el patr\xF3n especificado"),t())}function xe(e,n){if(e&1&&(i(0,"div",48),c(1,_e,2,0,"div",18)(2,ve,2,0,"div",18)(3,ge,2,0,"div",18)(4,Ue,2,0,"div",18),t()),e&2){let r=p();a(),l("ngIf",r.PostUserForm.controls.password.errors==null?null:r.PostUserForm.controls.password.errors.required),a(),l("ngIf",r.PostUserForm.controls.password.errors==null?null:r.PostUserForm.controls.password.errors.minlength),a(),l("ngIf",r.PostUserForm.controls.password.errors==null?null:r.PostUserForm.controls.password.errors.maxlength),a(),l("ngIf",r.PostUserForm.controls.password.errors==null?null:r.PostUserForm.controls.password.errors.pattern)}}function be(e,n){e&1&&(i(0,"div"),o(1,"La confirmaci\xF3n de la contrase\xF1a es requerida"),t())}function he(e,n){e&1&&(i(0,"div"),o(1,"La confirmaci\xF3n de la contrase\xF1a debe tener al menos 8 caracteres"),t())}function Fe(e,n){e&1&&(i(0,"div"),o(1,"La confirmaci\xF3n de la contrase\xF1a no puede tener m\xE1s de 230 caracteres"),t())}function Ee(e,n){e&1&&(i(0,"div"),o(1,"La confirmaci\xF3n de la contrase\xF1a debe seguir el patr\xF3n especificado"),t())}function Ce(e,n){if(e&1&&(i(0,"div",48),c(1,be,2,0,"div",18)(2,he,2,0,"div",18)(3,Fe,2,0,"div",18)(4,Ee,2,0,"div",18),t()),e&2){let r=p();a(),l("ngIf",r.PostUserForm.controls.password_confirmation.errors==null?null:r.PostUserForm.controls.password_confirmation.errors.required),a(),l("ngIf",r.PostUserForm.controls.password_confirmation.errors==null?null:r.PostUserForm.controls.password_confirmation.errors.minlength),a(),l("ngIf",r.PostUserForm.controls.password_confirmation.errors==null?null:r.PostUserForm.controls.password_confirmation.errors.maxlength),a(),l("ngIf",r.PostUserForm.controls.password_confirmation.errors==null?null:r.PostUserForm.controls.password_confirmation.errors.pattern)}}function Se(e,n){e&1&&(i(0,"div"),o(1,"El status es requerido"),t())}function ye(e,n){e&1&&(i(0,"div"),o(1,"El status debe ser 0 o 1"),t())}function Ie(e,n){if(e&1&&(i(0,"div",48),c(1,Se,2,0,"div",18)(2,ye,2,0,"div",18),t()),e&2){let r=p();a(),l("ngIf",r.PostUserForm.controls.status.errors==null?null:r.PostUserForm.controls.status.errors.required),a(),l("ngIf",r.PostUserForm.controls.status.errors==null?null:r.PostUserForm.controls.status.errors.pattern)}}function Pe(e,n){if(e&1&&(i(0,"option",49),o(1),t()),e&2){let r=n.$implicit;l("value",r.id),a(),g(r.rol)}}function we(e,n){e&1&&(i(0,"div"),o(1,"El Rol ID es requerido"),t())}function Te(e,n){e&1&&(i(0,"div"),o(1,"El Rol ID debe ser un n\xFAmero"),t())}function qe(e,n){if(e&1&&(i(0,"div",48),c(1,we,2,0,"div",18)(2,Te,2,0,"div",18),t()),e&2){let r=p();a(),l("ngIf",r.PostUserForm.controls.rol_id.errors==null?null:r.PostUserForm.controls.rol_id.errors.required),a(),l("ngIf",r.PostUserForm.controls.rol_id.errors==null?null:r.PostUserForm.controls.rol_id.errors.pattern)}}var Re=(()=>{let n=class n{constructor(s,u,m){this.userService=s,this.formBuilde=u,this.rolesSerivce=m,this.users={data:[]},this.userfilter="all",this.userData={name:"",email:"",password:"",password_confirmation:"",status:0,rol_id:0},this.roles={data:[]},this.msg="",this.id=0,this.errrorV=!1,this.errors={name:"",email:"",password:"",status:"",rol_id:""},this.PostUserForm=this.formBuilde.group({name:[this.userData.name,[d.required,d.minLength(3),d.maxLength(30)]],email:[this.userData.email,[d.required,d.email,d.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]],password:[this.userData.password,[d.required,d.minLength(8),d.pattern(/^[a-zA-Z0-9 ]*$/),d.maxLength(230)]],password_confirmation:[this.userData.password_confirmation,[d.required,d.minLength(8),d.pattern(/^[a-zA-Z0-9 ]*$/),d.maxLength(230)]],status:[this.userData.status,[d.required,d.pattern(/^[0-1]{1}$/)]],rol_id:[1,[d.required,d.pattern(/^[0-9]{1}$/)]]})}ngOnInit(){this.getUsers(),this.getRoles()}filterUsers(s){this.userfilter=s}deleteModal(s){this.id=s,console.log(this.id)}postUser(){this.PostUserForm.valid&&(this.userData=this.PostUserForm.value,this.userService.postUser(this.userData).subscribe(s=>{this.getUsers(),this.msg=s.msg,setTimeout(()=>{this.msg=""},3e3),this.PostUserForm.reset()},s=>{console.log(s),this.errrorV=!0,this.errors.password=s.error.errors.password,this.errors.email=s.error.errors.email,this.errors.name=s.error.errors.name,this.errors.status=s.error.errors.status,this.errors.rol_id=s.error.errors.rol_id,setTimeout(()=>{this.errrorV=!1,this.errors={name:"",email:"",password:"",status:"",rol_id:""}},3e3)}))}getUsers(){this.userService.getUsers().subscribe(s=>{this.users=s},s=>{console.log(s)})}getRoles(){this.rolesSerivce.getRoles().subscribe(s=>{console.log(s),this.roles=s},s=>{console.log(s)})}deleteUser(){this.userService.delete(this.id).subscribe(s=>{this.getUsers()},s=>{console.log(s)})}};n.\u0275fac=function(u){return new(u||n)(h(J),h(Z),h(K))},n.\u0275cmp=y({type:n,selectors:[["app-users"]],standalone:!0,features:[T],decls:90,vars:17,consts:[["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6","text-center"],[1,"card","border-primary","shadow"],[1,"card-body"],[1,"card-title","text-primary"],[1,"row"],[1,"col-md-12"],[1,"card","border","shadow"],["type","button","data-bs-toggle","modal","data-bs-target","#postUser",1,"btn","add"],[1,"bi","bi-person"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"table","table-striped"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"modalId","modalTitle"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","formControlName","name","placeholder","Nombre","required","",1,"form-control"],["class","text-danger",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","name","email","formControlName","email","placeholder","Email","required","",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","name","password","formControlName","password","placeholder","Contrase\xF1a","required","",1,"form-control"],[1,"mb3"],["for","password_confirmation",1,"form-label"],["type","password","id","password_confirmation","name","password_confirmation","formControlName","password_confirmation","placeholder","Confirmar contrase\xF1a","required","",1,"form-control"],["for","status",1,"form-label"],["id","status","name","status","formControlName","status","required","",1,"form-select"],["value","1"],["value","0"],["for","rol_id",1,"form-label"],["id","rol_id","name","rol_id","formControlName","rol_id","required","",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-success"],["colspan","4",1,"text-center"],["type","button","data-bs-toggle","modal","data-bs-target","#deleteUser",1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash-fill"],[1,"text-danger"],[3,"value"]],template:function(u,m){u&1&&(c(0,re,4,3,"div",0)(1,ie,2,1,"div",1),i(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1",7),o(8,"Usuarios"),t()()()()(),i(9,"div",2)(10,"div",8)(11,"div",9)(12,"div",10),f(13,"div",6),i(14,"div",8)(15,"div",9)(16,"button",11),f(17,"i",12),o(18," Agregar usuario "),t()()(),i(19,"div",13)(20,"button",14),v("click",function(){return m.filterUsers("all")}),o(21,"Todos"),t(),i(22,"button",15),v("click",function(){return m.filterUsers("active")}),o(23,"Activos"),t(),i(24,"button",16),v("click",function(){return m.filterUsers("inactive")}),o(25,"Inactivos"),t()(),i(26,"div",8)(27,"div",9)(28,"table",17)(29,"thead")(30,"tr")(31,"th"),o(32,"Nombre"),t(),i(33,"th"),o(34,"Email"),t(),i(35,"th"),o(36,"Status"),t(),i(37,"th"),o(38,"Actions"),t()()(),i(39,"tbody"),c(40,ne,4,0,"ng-container",18)(41,se,2,1,"tr",19),t()()()()()()()(),i(42,"app-modal",20)(43,"p"),o(44,"\xBFEst\xE1s seguro de desactivar al usuario?"),t(),i(45,"button",21),v("click",function(){return m.deleteUser()}),o(46,"Eliminar"),t(),i(47,"button",22),o(48,"Cancelar"),t()(),i(49,"app-modal",20)(50,"form",23),v("ngSubmit",function(){return m.postUser()}),i(51,"div",24)(52,"label",25),o(53,"Nombre"),t(),f(54,"input",26),c(55,de,4,3,"div",27),t(),i(56,"div",24)(57,"label",28),o(58,"Email"),t(),f(59,"input",29),c(60,fe,4,3,"div",27),t(),i(61,"div",24)(62,"label",30),o(63,"Contrase\xF1a"),t(),f(64,"input",31),c(65,xe,5,4,"div",27),t(),i(66,"div",32)(67,"label",33),o(68,"Confirmar contrase\xF1a"),t(),f(69,"input",34),c(70,Ce,5,4,"div",27),t(),i(71,"div",24)(72,"label",35),o(73,"Status"),t(),i(74,"select",36)(75,"option",37),o(76,"Activo"),t(),i(77,"option",38),o(78,"Inactivo"),t()(),c(79,Ie,3,2,"div",27),t(),i(80,"div",24)(81,"label",39),o(82,"Rol ID"),t(),i(83,"select",40),c(84,Pe,2,2,"option",41),t(),c(85,qe,3,2,"div",27),t(),i(86,"button",42),o(87,"Agregar"),t(),i(88,"button",22),o(89,"Cancelar"),t()()()()),u&2&&(l("ngIf",m.errrorV),a(),l("ngIf",m.msg),a(39),l("ngIf",m.users.data.length===0),a(),l("ngForOf",m.users.data),a(),l("modalId","deleteUser")("modalTitle","Eliminar usuario"),a(7),l("modalId","postUser")("modalTitle","Agregar usuario"),a(),l("formGroup",m.PostUserForm),a(5),l("ngIf",m.PostUserForm.controls.name.invalid&&(m.PostUserForm.controls.name.dirty||m.PostUserForm.controls.name.touched)),a(5),l("ngIf",m.PostUserForm.controls.email.invalid&&(m.PostUserForm.controls.email.dirty||m.PostUserForm.controls.email.touched)),a(5),l("ngIf",m.PostUserForm.controls.password.invalid&&(m.PostUserForm.controls.password.dirty||m.PostUserForm.controls.password.touched)),a(5),l("ngIf",m.PostUserForm.controls.password_confirmation.invalid&&(m.PostUserForm.controls.password_confirmation.dirty||m.PostUserForm.controls.password_confirmation.touched)),a(9),l("ngIf",m.PostUserForm.controls.status.invalid&&(m.PostUserForm.controls.status.dirty||m.PostUserForm.controls.status.touched)),a(5),l("ngForOf",m.roles.data),a(),l("ngIf",m.PostUserForm.controls.rol_id.invalid&&(m.PostUserForm.controls.rol_id.dirty||m.PostUserForm.controls.rol_id.touched)),a(),l("disabled",m.PostUserForm.invalid))},dependencies:[N,q,k,G,V,O,z,A,M,D,L,B,R,j,$],styles:[".add[_ngcontent-%COMP%]{margin:10px;padding:10px;border-radius:5px;background-color:#4caf50;color:#fff;border:none;cursor:pointer;font-size:20px}.border[_ngcontent-%COMP%]{margin:10px;padding:10px;border-radius:5px;background-color:#f2f2f2;color:#000;border:none;cursor:pointer;font-size:20px}"]});let e=n;return e})();export{Re as UsersComponent};
